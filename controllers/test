const getInventoryInwardReciever = async (req, res) => {
  try {
    const user = req.query.user;
    const inventorystatus = req.query.inventorystatus;

    // Input validation
    if (!user || !inventorystatus) {
      return res
        .status(400)
        .json({ message: "User and inventory status are required." });
    }

    // Define the raw SQL query with a LEFT JOIN
    // Execute the query
    const [results, metadata] = await sequelize.query(`
      SELECT a.*, b.*
      FROM "WOW"."wow-inventory-inward" a
      LEFT JOIN "WOW"."wow-material-inventory" b ON a.inventory_id = b.inventory_id
      WHERE a.inventory_inward_status = '${inventorystatus}'
      AND (a.inventory_receiver_email = '${user}' OR a.inventory_approver_email = '${user}' OR a.created_by = '${user}');
    `);
    // Return the data
    if (results.length === 0) {
      return res.status(200).json({ message: "No inventory found." });
    }

    res.status(200).json(results);
  } catch (error) {
    console.error("Error fetching inventory:", error);
    res.status(500).json({ message: "Internal server error." });
  }
};
const getInventoryMaterial = async (req, res) => {
  try {
    const inventory_id = req.query.inventory_id;

    // Input validation
    if (!inventory_id) {
      return res
        .status(400)
        .json({ message: "User and inventory status are required." });
    }
    const foundInventoryMaterial = await MaterialInventory.findAll({
      where: {
        inventory_id: inventory_id,
      },
    });

    if (foundInventoryMaterial.length === 0) {
      return res.status(200).json({ message: "No material records found." });
    }

    res.json(foundInventoryMaterial);
  } catch (error) {
    console.error(error);
    res.status(500).json({ message: "Internal Server Error" });
  }
};
